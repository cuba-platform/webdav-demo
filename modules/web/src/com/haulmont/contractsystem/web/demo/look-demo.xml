<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<window xmlns="http://schemas.haulmont.com/cuba/window.xsd"
        caption="msg://caption"
        class="com.haulmont.contractsystem.web.demo.LookDemo"
        messagesPack="com.haulmont.contractsystem.web.demo"
        xmlns:webdav="http://schemas.haulmont.com/webdav/ui-component.xsd">
    <dsContext>
        <collectionDatasource id="webdavDocumentVersionsDs"
                              class="com.haulmont.webdav.entity.WebdavDocumentVersion"
                              view="webdavDocumentVersion-look">
            <query>
                <![CDATA[select e from webdav$WebdavDocumentVersion e
                 where e.naturalVersionId is not null and e.webdavDocument is not null
                 order by e.naturalVersionId ]]>
            </query>
        </collectionDatasource>
        <collectionDatasource id="fileDescriptorsDs"
                              class="com.haulmont.cuba.core.entity.FileDescriptor">
            <query>
                <![CDATA[select e from sys$FileDescriptor e]]>
            </query>
        </collectionDatasource>
    </dsContext>
    <dialogMode height="600"
                width="800"/>
    <layout expand="table"
            spacing="true">
        <buttonsPanel align="MIDDLE_LEFT">
            <button action="table.refresh"/>
            <button id="showVersion"
                    align="MIDDLE_LEFT"
                    caption="msg://showVersion"
                    invoke="showVersion"/>
            <button id="setCubaDownloadIcon"
                    caption="msg://addCubaDownloadIcon"
                    icon="icons/download.png"
                    invoke="onSetCubaDownloadIconClick"/>
            <button id="setVaadinFontWordIcon"
                    caption="msg://addVaadinFontWordIcon"
                    icon="font-icon:FILE_WORD_O"
                    invoke="onSetVaadinFontWordIconClick"/>
            <button id="removeCaption"
                    caption="msg://removeCaption"
                    invoke="onRemoveCaptionClick"/>
            <lookupField id="fileDescriptorLookup"
                         optionsDatasource="fileDescriptorsDs"/>
            <button id="apply"
                    caption="apply "
                    invoke="onApplyClick"/>
        </buttonsPanel>
        <table id="table"
               height="300px"
               width="100%">
            <actions>
                <action id="refresh"/>
            </actions>
            <columns>
                <column id="naturalVersionId"
                        caption="msg://version"/>
                <column id="fileDescriptor"
                        caption="msg://name"/>
                <column id="createdBy"/>
                <column id="createTs"/>
                <column id="actions"
                        caption="msg://actions"
                        generator="generateActionsCell"/>
            </columns>
            <rows datasource="webdavDocumentVersionsDs"/>
        </table>
        <webdav:document-link id="webdavLink" datasource="webdavDocumentVersionsDs" property="fileDescriptor"/>
    </layout>
</window>
